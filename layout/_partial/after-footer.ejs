<script defer src="<%- url_npm_cdn('bootstrap@3.3.4/dist/js/bootstrap.min.js') %>"></script>
<script defer src="<%- url_npm_cdn('nprogress@0.2.0/nprogress.js') %>"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "<%- url_for('/') %>";
</script>
<% if(theme.snow){ %>
    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="<%- url_cdn('js/snow.min.js') %>"></script>
    </div>
<% } %>
<% if (theme.click_animate_js) { %>
    <script async src="<%- url_cdn('js/' + theme.click_animate_js + '.min.js') %>"></script>
<% } %>

<% if (theme.aplayer.enabled) { %>
    <script defer src="<%- url_npm_cdn('aplayer@1.10.1/dist/APlayer.min.js') %>"></script>
    <%- partial('../_tools/player') %>
<% }%>
<% if (page.type !== '404' && theme.fancybox){ %>
    <script defer src="<%- url_npm_cdn('@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js') %>"></script>
<% } %>
<script defer src="<%- url_npm_cdn('clipboard@2.0.6/dist/clipboard.min.js') %>"></script>
<script defer src="<%- url_cdn('js/kratosr.min.js') %>"></script>
<script defer src="<%- url_cdn('js/pjax.min.js') %>"></script>
<% if (page.type !== '404' && theme.posts.donate) { %>
    <script defer src="<%- url_npm_cdn('layui-src@2.5.5/dist/layui.all.js') %>"></script>
<% } %>
<% if (theme.enable_dark) { %>
    <script defer src="<%- url_cdn('js/kr-dark.min.js') %>"></script>
<% } %>
<%- theme.site_analytics %>

<!-- Extra support for third-party plguins  -->
<% if (config.mermaid && config.mermaid.enable || theme.mermaid && theme.mermaid.enable) { %>
    <%- partial('../_plugins/mermaid', { mermaidConfig: config.mermaid || theme.mermaid }) %>
<% } %>
